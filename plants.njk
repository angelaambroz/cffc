---
layout: layout.njk
pagination:
  data: plants
  size: 1
  alias: plant
permalink: "/plants/{{ plant.slug }}/"
---

<article class="plant-detail">
  <a href="/?layer={{ plant.layer | urlencode }}" class="plant-category">{{ plant.layer }}</a>
  {% if plant.tags %}
    {% for tag in plant.tags %}
	    <a href="/?tag={{ tag | urlencode }}" class="plant-tag"><span class="plant-tag">{{ tag }}</span></a>
	    {% if not loop.last %} ‚Ä¢ {% endif %}
    {% endfor %}
  {% endif %}
  <h1>{{ plant.name }}</h1>
  <p class="scientific-name"><em>{{ plant.scientificName }}</em></p>
  
  {% set imagePath = "/images/plants/" + plant.name + ".jpg" %}
  <img src="{{ imagePath }}" 
       alt="{{ plant.name }}"
       title="{{ plant.name }}" />

  <div class="plant-detail-container">
    <!-- Left Column: Botanical Information -->
    <div class="botanical-info">
      <div class="section-header">
        <h2>üåø Botanical Info</h2>
      </div>

      {% if plant.overview %}
        <section>
          <h3>Overview</h3>
          <p>{{ plant.overview }}</p>
        </section>
      {% endif %}

      {% if plant.appearance %}
        <section>
          <h3>Appearance</h3>
          <p>{{ plant.appearance }}</p>
        </section>
      {% endif %}

      {% if plant.growingConditions %}
        <section>
          <h3>Growing Conditions</h3>
          <p>{{ plant.growingConditions }}</p>
        </section>
      {% endif %}

      {% if plant.cultivation %}
        <section>
          <h3>Cultivation</h3>
          <p>{{ plant.cultivation }}</p>
        </section>
      {% endif %}

      {% if plant.moreInfo %}
        <section>
          <h3>More info</h3>
          <p>{{ plant.moreInfo }}</p>
        </section>
      {% endif %}

    </div>

    <!-- Right Column: Culinary Information -->
    <div class="culinary-info">
      <div class="section-header">
        <h2>üç≤ Culinary Uses</h2>
      </div>

      {% if plant.culinaryUses %}
        <section>
          <h3>Uses</h3>
          <p>{{ plant.culinaryUses }}</p>
        </section>
      {% endif %}

      {% if plant.taste %}
        <section>
          <h3>Taste and Flavor</h3>
          <p>{{ plant.taste }}</p>
        </section>
      {% endif %}

      {% if plant.nutrition %}
        <section>
          <h3>Nutritional Value</h3>
          <p>{{ plant.nutrition }}</p>
        </section>
      {% endif %}

      {% if plant.availability %}
        <section>
          <h3>Availability</h3>
          <p>{{ plant.availability }}</p>
        </section>
      {% endif %}

      {% if plant.shelfLife %}
        <section>
          <h3>Shelf Life</h3>
          <p>{{ plant.shelfLife }}</p>
        </section>
      {% endif %}

      {% if plant.allergies %}
        <section>
          <h3>Allergies</h3>
          <p>{{ plant.allergies }}</p>
        </section>
      {% endif %}
    </div>
  </div>

  <a href="/" class="back-link">‚Üê Back to catalog</a>
</article>

<script>
// Make plants data available to JavaScript
const plantsData = {{ plants | dump | safe }};

// Create search functionality
function createSearchInterface() {
  // Create search container
  const searchContainer = document.createElement('div');
  searchContainer.className = 'plant-search-overlay';
  searchContainer.innerHTML = `
    <div class="search-modal">
      <div class="search-header">
        <input type="text" id="plant-search" placeholder="Search all plants..." autocomplete="off">
        <button class="close-search">&times;</button>
      </div>
      <div class="search-results" id="search-results"></div>
    </div>
  `;
  
  document.body.appendChild(searchContainer);
  
  const searchInput = document.getElementById('plant-search');
  const searchResults = document.getElementById('search-results');
  const closeBtn = searchContainer.querySelector('.close-search');
  
  // Search functionality
  searchInput.addEventListener('input', (e) => {
    const query = e.target.value.toLowerCase().trim();
    
    if (query.length < 2) {
      searchResults.innerHTML = '';
      return;
    }
    
    const matches = plantsData.filter(plant => 
      plant.name.toLowerCase().includes(query) ||
      (plant.overview && plant.overview.toLowerCase().includes(query)) ||
      (plant.taste && plant.taste.toLowerCase().includes(query)) ||
      (plant.culinaryUses && plant.culinaryUses.toLowerCase().includes(query))
    );
    
    if (matches.length === 0) {
      searchResults.innerHTML = '<div class="no-results">No plants found</div>';
      return;
    }
    
    searchResults.innerHTML = matches.map(plant => `
      <div class="search-result-item">
        <a href="/plants/${plant.slug}/">
          <h4>${plant.name}</h4>
          <p>${plant.overview ? plant.overview.substring(0, 100) + '...' : 'No description available'}</p>
        </a>
      </div>
    `).join('');
  });
  
  // Close search
  closeBtn.addEventListener('click', () => {
    searchContainer.style.display = 'none';
    searchInput.value = '';
    searchResults.innerHTML = '';
  });
  
  // Close on escape key
  document.addEventListener('keydown', (e) => {
    if (e.key === 'Escape' && searchContainer.style.display !== 'none') {
      searchContainer.style.display = 'none';
      searchInput.value = '';
      searchResults.innerHTML = '';
    }
  });
  
  // Close when clicking outside modal
  searchContainer.addEventListener('click', (e) => {
    if (e.target === searchContainer) {
      searchContainer.style.display = 'none';
      searchInput.value = '';
      searchResults.innerHTML = '';
    }
  });
}

// Create search button
function addSearchButton() {
  const searchBtn = document.createElement('button');
  searchBtn.className = 'floating-search-btn';
  searchBtn.innerHTML = 'üîç';
  searchBtn.title = 'Search all plants';
  
  searchBtn.addEventListener('click', () => {
    const overlay = document.querySelector('.plant-search-overlay');
    overlay.style.display = 'flex';
    document.getElementById('plant-search').focus();
  });
  
  document.body.appendChild(searchBtn);
}

// Initialize when page loads
document.addEventListener('DOMContentLoaded', () => {
  createSearchInterface();
  addSearchButton();
});
</script>
